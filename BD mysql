--------------creacion de tabla
CREATE TABLE accounts (
    account_number INT PRIMARY KEY,
    balance DECIMAL(10, 2) NOT NULL
);
---------Stored Procedure Transaccional
DELIMITER $$
CREATE PROCEDURE transfer_funds(IN from_account INT, IN to_account INT, IN amount DECIMAL(10, 2))
BEGIN
    START TRANSACTION;
    SELECT balance FROM accounts WHERE account_number = from_account INTO @from_balance;
    IF @from_balance < amount THEN 
        SIGNAL SQLSTATE '45000' SET MESSAGE_TEXT = 'Saldo Insuficiente';
    ELSE 
        UPDATE accounts SET balance = balance - amount WHERE account_number = from_account;
        UPDATE accounts SET balance = balance + amount WHERE account_number = to_account;
    END IF;
    COMMIT;
END$$
DELIMITER ;

---------Stored Procedure No Transaccional
DELIMITER $$
CREATE PROCEDURE transfer_funds_non_transactional(IN from_account INT, IN to_account INT, IN amount DECIMAL(10, 2))
BEGIN
    UPDATE accounts SET balance = balance - amount WHERE account_number = from_account;
    UPDATE accounts SET balance = balance + amount WHERE account_number = to_account;
END;

-------------Insert
INSERT INTO accounts VALUES(1,200),(2,0);
